<!--
  input: []
  params:
    - name: paramName
      label: parameter Name
      value:
        - control: textbox
          value: TextBox
  output: [  html,textVal ]
-->

<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
<link rel="stylesheet" href="https://unpkg.com/buefy/dist/buefy.min.css">
<script src="https://unpkg.com/buefy/dist/buefy.min.js"></script>

<div class="textboxContainer app-layout-initial-width-500px">
  <template>
    <section>
          {{ parameter }}
            <b-input type="text"
                v-model="value"
                @change.native="textChange">>
            </b-input>
    </section>
  </template>
</div>


<script>
  var state = hal9.getState();
  state = state ? state : {};
  let textVal = '';
  if (state.textVal) {
    textVal = state.textVal;
    value = textVal;
  }

  var app = new Vue({
    el: html.getElementsByClassName('textboxContainer')[0],
    data: {
      value: textVal,
      parameter: paramName
    },
    methods: {
      textChange(e){
        state.textVal = e.target.value;
        hal9.setState(state);
        hal9.invalidate();
      }
    }
  })
  html.style.height = 'auto';
</script>